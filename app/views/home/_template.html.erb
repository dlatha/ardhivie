<script id="template-upload" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-upload fade">
        <td class="name"><span>{%=file.name%}</span></td>
        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% if (file.error) { %}
            <td class="error"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else if (o.files.valid && !i) { %}
            <td>
                <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
            </td>
        {% } %}
    </tr>
{% } %}
</script>
<!-- The template to display files available for download -->
<script id="template-download" type="text/x-tmpl">
{% for (var i=0, file; file=o.files[i]; i++) { %}
    <tr class="template-download fade">
        {% if (file.error) { %}
            <td class="error" colspan="2"><span class="label label-important">{%=locale.fileupload.error%}</span> {%=locale.fileupload.errors[file.error] || file.error%}</td>
        {% } else { %}
            <td class="name">
                <a href="{%=file.url%}" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
            </td>
            <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
        {% } %}
        <td class="delete">
            <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}">
                <i class="icon-trash icon-white"></i>
                <span>{%=locale.fileupload.destroy%}</span>
            </button>
        </td>
    </tr>
{% } %}
</script>
<script id="template-ufile-form" type="text/x-tmpl">
<div class="file-upload-container">
  <form action="/api/ufiles.json" class="fileupload fileupload-{%=o.location_id%}" enctype="multipart/form-data" method="POST" id="form-{%=o.location_id%}">
    <div class="header">
      <h5>{%=o.title%}</h5>
      <p class="lead">{%=o.address%}</p>
    </div>
    <div class="existing-files">
      <table class="table table-striped" role="presentation">
        <tbody class="files">
        </tbody>
      </tbody>
      </table>
    </div>
    <div class="fileupload-buttonbar">
      <div>
        <span class="btn btn-success fileinput-button">
          <i class="icon-plus icon-white"></i>
          <span> Add files... </span>
          <input multiple="multiple" name="ufile[data]" type="file">
          <input class="location_id" name="ufile[location_id]" type="hidden" value="{%=o.location_id%}">
        </span>
        <span class="btn btn-primary zoomin-button" data-location-id="{%=o.location_id%}">
          <i class="icon-zoom-in icon-white"></i>
          <span> Zoom In </span>
        </span>
        <span class="btn btn-danger delete-location" data-location-id="{%=o.location_id%}">
          <i class="icon-trash icon-white"></i>
          <span> Delete Location </span>
        </span>
      </div>
    </div>
  </form>
</div>
</script>